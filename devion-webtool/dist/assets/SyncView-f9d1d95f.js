import{B as o,G as s}from"./global-d1d627d6.js";import{_ as y,e as h,o as b,c as S,a as e,f as u,q as r,t as a}from"./index-894bacca.js";let c;const d={name:"SyncView",props:{count:Number},components:{ButtonDevion:o},data(){return{buttonSyncDev:{components:{ButtonDevion:o},label:"Sync Devion",isDisabled:!1,showButton:!0},buttonSyncMet:{components:{ButtonDevion:o},label:"Sync Metetabil",isDisabled:!1,showButton:!0},syncStatus:{syncDev:!1,syncMet:!1}}},methods:{handleButtonSyncDev(){this.syncStatus.syncDev=1,s("devion/sync").then(t=>(this.syncStatus.syncDev=0,t)).catch(t=>{console.error("Error during fetch:",t)})},handleButtonSyncMet(){this.syncStatus.syncMet=1,s("metabil/sync").then(t=>{if(this.syncStatus.syncMet=0,!t.ok)throw new Error("Network response was not ok");return t.json()}).catch(t=>{console.error("Error during fetch:",t)})},update:function(){s("devion/sync/status").then(t=>t).then(t=>{this.syncStatus.syncDev=t.sync}),s("metabil/sync/status").then(t=>t).then(t=>{this.syncStatus.syncMet=t.sync}),c=setTimeout(this.update,1e3)}},mounted:function(){c=setTimeout(this.update,1e3)},beforeUnmount:function(){console.log("unmounted"),clearTimeout(c)}},v=e("h1",null,"Sync View",-1),D={class:"buttons"},m={class:"sync"};function _(t,p,f,B,n,i){const l=h("ButtonDevion");return b(),S("div",null,[v,e("div",D,[u(l,{label:n.buttonSyncDev.label,isDisabled:n.buttonSyncDev.isDisabled,showButton:n.buttonSyncDev.showButton,onClick:i.handleButtonSyncDev},null,8,["label","isDisabled","showButton","onClick"]),u(l,{label:n.buttonSyncMet.label,isDisabled:n.buttonSyncMet.isDisabled,showButton:n.buttonSyncMet.showButton,onClick:i.handleButtonSyncMet},null,8,["label","isDisabled","showButton","onClick"])]),e("div",m,[e("div",{style:r({backgroundColor:n.syncStatus.syncDev?"red":"green"}),class:"metrics"}," Devion: "+a(n.syncStatus.syncDev?"Syncing":"Not syncing"),5),e("div",{style:r({backgroundColor:n.syncStatus.syncMet?"red":"green"}),class:"metrics"}," Metabil: "+a(n.syncStatus.syncMet?"Syncing":"Not syncing"),5)])])}const g=y(d,[["render",_]]);export{g as default};
