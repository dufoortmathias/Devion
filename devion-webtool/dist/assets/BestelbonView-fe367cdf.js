import{d as f,b as D,t as k,G as u}from"./textInput-67a4d7fa.js";import{_ as I,w as v,v as _,o as b,c as p,a as r,t as h,F as S,r as g,p as T,b as x,d as m,e as w}from"./index-62449223.js";const j={props:{showTabel:Boolean,bestelbonNr:String,showError:Boolean,showInfo:Boolean,artikels:Array}},L=n=>(T("data-v-dcd94a6c"),n=n(),x(),n),R={class:"c-label--error"},V=L(()=>r("thead",null,[r("tr",null,[r("th",null,"Artikel"),r("th",null,"Aantal"),r("th",null,"Omschrijving")])],-1));function G(n,l,o,t,e,a){return v((b(),p("div",null,[r("h1",null," bestelbon "+h(o.bestelbonNr),1),v(r("h3",R," Er zijn geen artikels bij deze bestelbon!",512),[[_,o.showError]]),(b(!0),p(S,null,g(o.artikels,c=>v((b(),p("div",{key:c.leverancier.name},[r("h3",null,h(c.leverancier.name),1),r("table",null,[V,r("tbody",null,[(b(!0),p(S,null,g(c.leverancier.artikels,s=>(b(),p("tr",{key:s.artikelNummer},[r("td",null,h(s.artikelNummer),1),r("td",null,h(s.aantal),1),r("td",null,h(s.omschrijving),1)]))),128))])])])),[[_,o.showInfo]])),128))],512)),[[_,o.showTabel]])}const C=I(j,[["render",G],["__scopeId","data-v-dcd94a6c"]]);let U=[],i="companies",d="",N="",B="";const A={components:{Dropdown:f,ButtonDevion:D,TabelBestelbon:C,textInput:k},data(){return{dropdownCompanies:{components:{Dropdown:f},id:"dropdownCompanies",label:"Bedrijf",options:U,error:!1},dropdownBestelbon:{components:{Dropdown:f},id:"dropdownBestelbon",label:"Bestelbon",options:[],error:!1},buttonDevion:{components:{ButtonDevion:D},label:"Download bestelbon",isButtonDisabled:!0,methods:{handleButtonClick(){console.log("Button clicked")},toggleButtonState(){this.isButtonDisabled=!this.isButtonDisabled}}},tabelBestelbon:{components:{TabelBestelbon:C},showTabel:!1,bestelbonNr:"",showError:!1,showInfo:!0,artikels:[]},seperator:{components:{textInput:k},id:"seperator",label:"Seperator",options:[],error:!1}}},created(){u(i).then(n=>n).then(n=>{console.log(n);const l=[];for(var o of n)l.push({value:o,label:o});this.dropdownCompanies.options=l,this.dropdownCompanies.selected=this.dropdownCompanies.options.find(t=>t.label.toLowerCase()=="devion").value,d=this.dropdownCompanies.selected,i=`${d}/ets/openpurchaseorderids`,u(i).then(t=>t).then(t=>{t.sort(),t.reverse();for(var e of t)this.dropdownBestelbon.options.push({value:e,label:e})})})},methods:{async handledropdownCompaniesSelected(n){d=n,i=`${d}/ets/openpurchaseorderids`,u(i).then(l=>l).then(l=>{l.sort(),l.reverse();for(var o of l)this.dropdownBestelbon.options.push({value:o,label:o})})},async handledropdownBestelbonSelected(n){N=n,this.buttonDevion.isButtonDisabled=!1;const l={id:n};i=`${d}/ets/purchaseorder?${new URLSearchParams(l)}`,u(i).then(o=>o).then(o=>{if(console.log(o),o!=null)if(this.tabelBestelbon.showTabel=!0,this.tabelBestelbon.bestelbonNr=o.bonNummer,o.artikels.length==0)this.tabelBestelbon.showError=!0,this.tabelBestelbon.showInfo=!1;else{console.log(o),this.tabelBestelbon.showError=!1,this.tabelBestelbon.showInfo=!0;let t=[],e=[];for(const a of o.artikels)e.includes(a.leverancier)||e.push(a.leverancier);for(const a of e){let c=[];for(const s of o.artikels)s.leverancier==a&&(s.artikelNummer!="VERZENDING"||s.omschrijving!="VERZENDING")&&c.push({artikelNummer:s.artikelNummer,aantal:s.aantal,omschrijving:s.omschrijving});t.push({leverancier:{name:a,artikels:c}})}this.tabelBestelbon.artikels=t}else this.tabelBestelbon.showTabel=!1})},handletextInputSelected(n){console.log(n),n==null?B=" ":n.includes("\\t")?B=n.replace("\\t","	"):B=n},async BestelbonDownload(){const n={id:N,seperator:B};i=`${d.toLocaleLowerCase()}/ets/createpurchasefile?${new URLSearchParams(n)}`,console.log(i),u(i).then(l=>{console.log(l);var o=atob(l.fileContents),t=new Blob([o],{type:l.contentType});const e=document.createElement("a");e.href=URL.createObjectURL(t),e.download=l.fileDownloadName,document.body.appendChild(e),e.click(),document.body.removeChild(e)})}}};function O(n,l,o,t,e,a){const c=m("Dropdown"),s=m("textInput"),y=m("ButtonDevion"),E=m("TabelBestelbon");return b(),p("div",null,[w(c,{id:e.dropdownCompanies.id,label:e.dropdownCompanies.label,options:e.dropdownCompanies.options,error:e.dropdownCompanies.error,onOptionSelected:a.handledropdownCompaniesSelected,class:"c-dropdown",selected:e.dropdownCompanies.selected},null,8,["id","label","options","error","onOptionSelected","selected"]),w(c,{id:e.dropdownBestelbon.id,label:e.dropdownBestelbon.label,options:e.dropdownBestelbon.options,error:e.dropdownBestelbon.error,onOptionSelected:a.handledropdownBestelbonSelected,class:"c-dropdown"},null,8,["id","label","options","error","onOptionSelected"]),w(s,{id:e.seperator.id,label:e.seperator.label,error:e.seperator.error,placeholder:e.seperator.label,onOptionSelected:a.handletextInputSelected,class:"c-text-input"},null,8,["id","label","error","placeholder","onOptionSelected"]),w(y,{label:e.buttonDevion.label,isDisabled:e.buttonDevion.isButtonDisabled,onClick:a.BestelbonDownload,class:"c-button-artikel-search"},null,8,["label","isDisabled","onClick"]),w(E,{showTabel:e.tabelBestelbon.showTabel,bestelbonNr:e.tabelBestelbon.bestelbonNr,showError:e.tabelBestelbon.showError,showInfo:e.tabelBestelbon.showInfo,artikels:e.tabelBestelbon.artikels},null,8,["showTabel","bestelbonNr","showError","showInfo","artikels"])])}const P=I(A,[["render",O],["__scopeId","data-v-cb164324"]]);export{P as default};
