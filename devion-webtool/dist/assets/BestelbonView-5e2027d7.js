import{_ as f,o as r,c as i,a as s,t as d,w as p,v as D,F as m,r as v,p as N,b as I,d as B,e as g,f as h}from"./index-0b4d71c3.js";const E={props:{id:String,label:String,options:Array,error:Boolean},data(){return{selectedOption:null}},methods:{emitSelectedOption(){this.$emit("option-selected",this.selectedOption)}}},O=n=>(N("data-v-00c75a67"),n=n(),I(),n),T={class:"c-input-placement"},j=["for"],L={key:0},V=["id"],A={value:"null",disabled:"",selected:""},M=["value"],U=O(()=>s("svg",{class:"c-custom-select__symbol",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[s("path",{d:"M7,10l5,5,5-5Z"})],-1)),R={class:"c-label--error"},Z={key:1},z=["id"],F={value:"null",disabled:"",selected:""},G=["value"],q=O(()=>s("svg",{class:"c-custom-select__symbol",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[s("path",{d:"M7,10l5,5,5-5Z"})],-1));function H(n,e,o,a,t,c){return r(),i("div",T,[s("label",{for:o.id,class:"c-label"},d(o.label)+":",9,j),o.error?(r(),i("div",L,[p(s("select",{id:o.id,"onUpdate:modelValue":e[0]||(e[0]=l=>t.selectedOption=l),onChange:e[1]||(e[1]=(...l)=>c.emitSelectedOption&&c.emitSelectedOption(...l)),class:"c-input c-custom-select c-input--error"},[s("option",A,"Selecteer een "+d(o.label),1),(r(!0),i(m,null,v(o.options,(l,b)=>(r(),i("option",{key:b,value:l.value},d(l.label),9,M))),128))],40,V),[[D,t.selectedOption]]),U,s("label",R,d(o.label)+" is verplicht!",1)])):(r(),i("div",Z,[p(s("select",{id:o.id,"onUpdate:modelValue":e[2]||(e[2]=l=>t.selectedOption=l),onChange:e[3]||(e[3]=(...l)=>c.emitSelectedOption&&c.emitSelectedOption(...l)),class:"c-input c-custom-select"},[s("option",F,"Selecteer een "+d(o.label),1),(r(!0),i(m,null,v(o.options,(l,b)=>(r(),i("option",{key:b,value:l.value},d(l.label),9,G))),128))],40,z),[[D,t.selectedOption]]),q]))])}const k=f(E,[["render",H],["__scopeId","data-v-00c75a67"]]);const J={props:{label:String,isDisabled:Boolean}},K=["disabled"];function P(n,e,o,a,t,c){return r(),i("button",{type:"button",disabled:o.isDisabled,class:"o-button-reset c-button"},d(o.label),9,K)}const y=f(J,[["render",P],["__scopeId","data-v-226b96f7"]]);const Q={props:{showTabel:Boolean,bestelbonNr:String,showError:Boolean,showInfo:Boolean,artikels:Array}},W=n=>(N("data-v-dcd94a6c"),n=n(),I(),n),X={class:"c-label--error"},Y=W(()=>s("thead",null,[s("tr",null,[s("th",null,"Artikel"),s("th",null,"Aantal"),s("th",null,"Omschrijving")])],-1));function $(n,e,o,a,t,c){return p((r(),i("div",null,[s("h1",null," bestelbon "+d(o.bestelbonNr),1),p(s("h3",X," Er zijn geen artikels bij deze bestelbon!",512),[[B,o.showError]]),(r(!0),i(m,null,v(o.artikels,l=>p((r(),i("div",{key:l.leverancier.name},[s("h3",null,d(l.leverancier.name),1),s("table",null,[Y,s("tbody",null,[(r(!0),i(m,null,v(l.leverancier.artikels,b=>(r(),i("tr",{key:b.artikelNummer},[s("td",null,d(b.artikelNummer),1),s("td",null,d(b.aantal),1),s("td",null,d(b.omschrijving),1)]))),128))])])])),[[B,o.showInfo]])),128))],512)),[[B,o.showTabel]])}const S=f(Q,[["render",$],["__scopeId","data-v-dcd94a6c"]]);function _(n){return fetch("http://192.168.100.237:5000/api/"+n).then(e=>e.json()).then(e=>e).catch(e=>console.log(e))}let ee=[],u="companies",w="",C="";const oe={components:{Dropdown:k,ButtonDevion:y,TabelBestelbon:S},data(){return{dropdownCompanies:{components:{Dropdown:k},id:"dropdownCompanies",label:"Bedrijf",options:ee,error:!1},dropdownBestelbon:{components:{Dropdown:k},id:"dropdownBestelbon",label:"Bestelbon",options:[],error:!1},buttonDevion:{components:{ButtonDevion:y},label:"Download bestelbon",isButtonDisabled:!0,methods:{handleButtonClick(){console.log("Button clicked")},toggleButtonState(){this.isButtonDisabled=!this.isButtonDisabled}}},tabelBestelbon:{components:{TabelBestelbon:S},showTabel:!1,bestelbonNr:"",showError:!1,showInfo:!0,artikels:[]}}},created(){_(u).then(n=>n).then(n=>{console.log(n);for(var e of n)this.dropdownCompanies.options.push({value:e,label:e})})},methods:{async handledropdownCompaniesSelected(n){w=n,u=`${w}/ets/openpurchaseorderids`,_(u).then(e=>e).then(e=>{e.sort(),e.reverse();for(var o of e)this.dropdownBestelbon.options.push({value:o,label:o})})},async handledropdownBestelbonSelected(n){C=n,this.buttonDevion.isButtonDisabled=!1,u=`${w}/ets/purchaseorder?id=${n}`,_(u).then(e=>e).then(e=>{if(console.log(e),e!=null)if(this.tabelBestelbon.showTabel=!0,this.tabelBestelbon.bestelbonNr=e.bonNummer,e.artikels.length==0)this.tabelBestelbon.showError=!0,this.tabelBestelbon.showInfo=!1;else{console.log(e),this.tabelBestelbon.showError=!1,this.tabelBestelbon.showInfo=!0;let o=[],a=[];for(const t of e.artikels)a.includes(t.leverancier)||a.push(t.leverancier);for(const t of a){let c=[];for(const l of e.artikels)l.leverancier==t&&l.artikelNummer.toLowerCase()!="VERZENDING".toLocaleLowerCase()&&c.push({artikelNummer:l.artikelNummer,aantal:l.aantal,omschrijving:l.omschrijving});o.push({leverancier:{name:t,artikels:c}})}this.tabelBestelbon.artikels=o}else this.tabelBestelbon.showTabel=!1})},async BestelbonDownload(){u=`${w}/ets/createpurchasefile?id=${C}`,_(u).then(n=>{var e=atob(n.fileContents),o=new Blob([e],{type:n.contentType});const a=document.createElement("a");a.href=URL.createObjectURL(o),a.download=n.fileDownloadName,document.body.appendChild(a),a.click(),document.body.removeChild(a)})}}};function te(n,e,o,a,t,c){const l=g("Dropdown"),b=g("ButtonDevion"),x=g("TabelBestelbon");return r(),i("div",null,[h(l,{id:t.dropdownCompanies.id,label:t.dropdownCompanies.label,options:t.dropdownCompanies.options,error:t.dropdownCompanies.error,onOptionSelected:c.handledropdownCompaniesSelected,class:"c-dropdown"},null,8,["id","label","options","error","onOptionSelected"]),h(l,{id:t.dropdownBestelbon.id,label:t.dropdownBestelbon.label,options:t.dropdownBestelbon.options,error:t.dropdownBestelbon.error,onOptionSelected:c.handledropdownBestelbonSelected,class:"c-dropdown"},null,8,["id","label","options","error","onOptionSelected"]),h(b,{label:t.buttonDevion.label,isDisabled:t.buttonDevion.isButtonDisabled,onClick:c.BestelbonDownload,class:"c-button-artikel-search"},null,8,["label","isDisabled","onClick"]),h(x,{showTabel:t.tabelBestelbon.showTabel,bestelbonNr:t.tabelBestelbon.bestelbonNr,showError:t.tabelBestelbon.showError,showInfo:t.tabelBestelbon.showInfo,artikels:t.tabelBestelbon.artikels},null,8,["showTabel","bestelbonNr","showError","showInfo","artikels"])])}const le=f(oe,[["render",te],["__scopeId","data-v-c0155d77"]]);export{le as default};
