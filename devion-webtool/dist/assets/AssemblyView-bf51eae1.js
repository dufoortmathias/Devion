import{_ as C,w as y,v as P,o as c,c as u,a,t as _,e as w,F as S,r as j,n as B,f as r,g as L}from"./index-624f8bce.js";import{B as d,L as g,P as E}from"./LabelDevion-940e8072.js";import{A}from"./ArtikelForm-31379c22.js";const O={props:{error:Boolean,label:String,filename:String,showFile:Boolean},components:{},data(){return{}},methods:{onFileChange(t){const l=t.target.files[0],s=new FileReader;l&&(s.readAsDataURL(l),s.onload=()=>{l.previewBase64=s.result,this.$emit("file-updated",l)},s.onerror=b=>{console.error(b)})}}},R={class:"c-input-placement"},U={class:"c-label c-label-file"},G={key:0,class:"c-input-file"},K={class:"file-label c-error",for:"file-input"},Z={class:"c-label--error"},z={key:1,class:"c-input-file"},J={class:"file-label",for:"file-input"};function M(t,l,s,b,e,o){return y((c(),u("div",R,[a("label",U,_(s.label)+": ",1),s.error?(c(),u("div",G,[a("input",{id:"file-input",class:"o-hide-accessible",type:"file",accept:".xlsx, .xls, .csv",onChange:l[0]||(l[0]=f=>o.onFileChange(f))},null,32),a("label",K,_(s.filename),1),a("label",Z,_(s.label)+" is verplicht!",1)])):(c(),u("div",z,[a("input",{id:"file-input",class:"o-hide-accessible",type:"file",accept:".xlsx, .xls, .csv",onChange:l[1]||(l[1]=f=>o.onFileChange(f))},null,32),a("label",J,_(s.filename),1)]))],512)),[[P,s.showFile]])}const T=C(O,[["render",M],["__scopeId","data-v-50eadc68"]]);const W={name:"TreeView",props:{jsonData:Array,showTree:Boolean},components:{},data(){return{expanded:!1}},methods:{toggleNode(t){t.expanded=!t.expanded},hasChildParts(t){return t.parts&&t.parts.length>0}}},q={class:"treeview"},H=["onClick"],Q={key:0};function X(t,l,s,b,e,o){const f=w("TreeView",!0);return y((c(),u("ul",q,[(c(!0),u(S,null,j(s.jsonData,(n,k)=>(c(),u("li",{key:k,class:"c-placement"},[a("div",null,[a("span",{onClick:v=>o.toggleNode(n),class:B([{caret:o.hasChildParts(n),"no-caret":!o.hasChildParts(n),"caret-down":n.expanded,exists:n.existsETS,"not-exists":!n.existsETS},"c-text"])},_(n.number)+" ("+_(n.description)+") ",11,H)]),n.parts&&n.expanded?(c(),u("ul",Q,[r(f,{jsonData:n.parts,showTree:!0},null,8,["jsonData"])])):L("",!0)]))),128))],512)),[[P,s.showTree]])}const V=C(W,[["render",X],["__scopeId","data-v-8bb2e7c8"]]);let I=null,h=[],m=0,x=0,i,D,F;const Y={components:{ExcelFileInput:T,ButtonDevion:d,TreeView:V,ArtikelForm:A,LabelDevion:g},data(){return{file:{components:{ExcelFileInput:T},id:"file",label:"assembly file",error:!1,showLabel:!0,filename:"Kies een bestand",showFile:!0},button:{components:{ButtonDevion:d},label:"IMPORTEREN",isDisabled:!1,showButton:!0},treeView:{components:{TreeView:V},showTree:!1,jsonData:null},buttonSave:{components:{ButtonDevion:d},label:"ARTIKELEN OPSLAAN",isDisabled:!1,showButton:!0},buttonInsert:{components:{ButtonDevion:d},label:"INVOEGEN",isDisabled:!1,showButton:!0},artikelForm:{components:{ArtikelForm:A},showform:!1,data:null,check:!1},save:{components:{ButtonDevion:d},label:"OPSLAAN",isButtonDisabled:!1,showButton:!1},next:{components:{ButtonDevion:d},label:"VOLGENDE",isButtonDisabled:!1,showButton:!1},prev:{components:{ButtonDevion:d},label:"VORIGE",isButtonDisabled:!1,showButton:!1},artikelProgress:{components:{LabelDevion:g},label:"Artikel 1 van 1",showLabel:!1},missing:{components:{LabelDevion:g},label:"Artikel niet gevonden 0/0",showlabel:!1}}},methods:{handleFileUpdate(t){this.file.error=!1,this.file.showLabel=!1,this.file.showButton=!0,this.file.filename=t.name,this.file.file=t},async handleButton(){let t="devion/ets/transformbomexcel";I=this.file.file.previewBase64.replace("data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,","");var l={FileContents:I};E(t,l).then(s=>{let b=JSON.parse(s);this.treeView.showTree=!0,this.treeView.jsonData=b,m=0,x=0;for(let e of b)this.checkArtikel(e);m>0?this.missing.showlabel=!0:this.missing.showlabel=!1,this.missing.label="Artikels niet gevonden "+m+"/"+x})},handleButtonSave(){m>0&&(this.artikelForm.showform=!0,i=89,this.artikelForm.data=h[i],this.save.showButton=!0,this.next.showButton=!0,this.prev.showButton=!0,this.artikelProgress.showLabel=!0,this.artikelProgress.label="Artikel 1/"+h.length,this.file.showFile=!1,this.button.showButton=!1,this.treeView.showTree=!1,this.buttonSave.showButton=!1,this.buttonInsert.showButton=!1,this.missing.showlabel=!1)},checkArtikel(t){if(x++,t.parts)for(let l of t.parts)this.checkArtikel(l);t.existsETS==!1&&(h.includes(t)?console.log("already in array"):(h.push(t),m++))},async handleButtonInsert(){m>0?(this.artikelForm.showform=!0,i=0,this.artikelForm.data=h[i],this.save.showButton=!1,this.next.showButton=!0,this.prev.showButton=!1,this.artikelProgress.showLabel=!0,this.artikelProgress.label="Artikel 1/"+h.length,this.file.showFile=!1,this.button.showButton=!1,this.treeView.showTree=!1,this.buttonSave.showButton=!1,this.buttonInsert.showButton=!1,this.missing.showlabel=!1):console.log("all parts found")},handleArtikel(t){F==!0?(console.log("saved"),this.artikelForm.showform=!1,this.save.showButton=!1,this.next.showButton=!1,this.prev.showButton=!1,this.artikelProgress.showLabel=!1,this.file.showFile=!0,this.button.showButton=!0,this.treeView.showTree=!0,this.buttonSave.showButton=!0,this.buttonInsert.showButton=!0,this.handleButton()):(F=!1,i=D,i==h.length-1?(this.next.showButton=!1,this.save.showButton=!0,this.artikelProgress.label=`Artikel ${i+1}/${h.length}`):i==0?(this.next.showButton=!0,this.save.showButton=!1,this.prev.showButton=!1,this.artikelProgress.label=`Artikel ${i+1}/${h.length}`):(this.next.showButton=!0,this.save.showButton=!1,this.prev.showButton=!0,this.artikelProgress.label=`Artikel ${i+1}/${h.length}`),this.ArtikelZoeken())},ArtikelZoeken(){this.artikelForm.showform=!0,this.artikelForm.data=h[i],this.artikelForm.check=!0,this.file.showFile=!1,this.button.showButton=!1,this.treeView.showTree=!1,this.buttonSave.showButton=!1,this.buttonInsert.showButton=!1},handleNextButtonClick(){D=i+1,this.$refs.article.createInfoObject()},handlePrevButtonClick(){D=i-1,this.$refs.article.createInfoObject()},handleSaveButtonClick(){F=!0,this.$refs.article.createInfoObject()}}},$={key:0,class:"c-buttons"},ee={class:"c-artikel-form"},te={class:"c-artikel-progress"};function se(t,l,s,b,e,o){const f=w("excelFileInput"),n=w("ButtonDevion"),k=w("TreeView"),v=w("labelDevion"),N=w("artikelForm"),p=w("buttonDevion");return c(),u(S,null,[r(f,{label:e.file.label,error:e.file.error,filename:e.file.filename,showFile:e.file.showFile,onFileUpdated:o.handleFileUpdate},null,8,["label","error","filename","showFile","onFileUpdated"]),r(n,{label:e.button.label,isDisabled:e.button.isDisabled,showButton:e.button.showButton,onClick:o.handleButton,class:"c-button"},null,8,["label","isDisabled","showButton","onClick"]),r(k,{jsonData:e.treeView.jsonData,showTree:e.treeView.showTree},null,8,["jsonData","showTree"]),e.treeView.showTree?(c(),u("div",$,[r(n,{label:e.buttonSave.label,isDisabled:e.buttonSave.isDisabled,showButton:e.buttonSave.showButton,onClick:o.handleButtonSave,class:"c-button c-button-tree"},null,8,["label","isDisabled","showButton","onClick"]),r(n,{label:e.buttonInsert.label,isDisabled:e.buttonInsert.isDisabled,showButton:e.buttonInsert.showButton,onClick:o.handleButtonInsert,class:"c-button c-button-tree"},null,8,["label","isDisabled","showButton","onClick"])])):L("",!0),r(v,{label:e.missing.label,showLabel:e.missing.showlabel,class:"c-artikel-missing"},null,8,["label","showLabel"]),a("div",ee,[r(N,{showform:e.artikelForm.showform,data:e.artikelForm.data,onObjectArtikel:o.handleArtikel,class:"c-form",check:e.artikelForm.check,ref:"article"},null,8,["showform","data","onObjectArtikel","check"]),a("div",{class:B(["c-artikel-button--save",{"o-hide-accessible":!e.save.showButton}])},[r(p,{label:e.save.label,isDisabled:e.save.isButtonDisabled,showButton:e.save.showButton,onClick:o.handleSaveButtonClick,class:"c-button-artikel--next"},null,8,["label","isDisabled","showButton","onClick"])],2),a("div",{class:B(["c-artikel-button--next",{"o-hide-accessible":!e.next.showButton}])},[r(p,{label:e.next.label,isDisabled:e.next.isButtonDisabled,showButton:e.next.showButton,onClick:o.handleNextButtonClick,class:"c-button-artikel--next"},null,8,["label","isDisabled","showButton","onClick"])],2),a("div",{class:B(["c-artikel-button--prev",{"o-hide-accessible":!e.prev.showButton}])},[r(p,{label:e.prev.label,isDisabled:e.prev.isButtonDisabled,showButton:e.prev.showButton,onClick:o.handlePrevButtonClick,class:"c-button-artikel--prev"},null,8,["label","isDisabled","showButton","onClick"])],2),a("div",te,[r(v,{label:e.artikelProgress.label,showLabel:e.artikelProgress.showLabel,class:"c-artikel-progress__text"},null,8,["label","showLabel"])])])],64)}const ie=C(Y,[["render",se],["__scopeId","data-v-dddded20"]]);export{ie as default};
